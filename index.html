<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>IRCTC Payment Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    .section-transition {
      transition: all 0.3s ease-in-out;
    }
    .fade-in {
      animation: fadeIn 0.4s ease-in-out;
    }
    .slide-down {
      animation: slideDown 0.4s ease-in-out;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .smooth-hover {
      transition: all 0.2s ease;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen flex items-center justify-center p-4">

  <div class="w-full max-w-md space-y-6 p-8 bg-white rounded-2xl shadow-xl backdrop-blur-sm border border-white/20">
    
    <div id="pnrSection" class="space-y-6 section-transition fade-in">
      <div class="text-center">
        <h2 class="text-3xl font-bold text-gray-800 bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent">Check Ticket Status</h2>
        <p class="text-gray-600 mt-2">Enter your PNR to check ticket details</p>
      </div>
      
      <div class="space-y-3">
        <label for="pnr" class="block text-sm font-semibold text-gray-700">PNR Number <span class="text-red-500">*</span></label>
        <input type="text" id="pnr" placeholder="Enter 4-digit PNR" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
        <p class="text-xs text-gray-500">Enter exactly 4 digits</p>
        <p id="pnrErr" class="text-sm text-red-500 mt-1 font-medium"></p>
        <p id="infoMessage" class="text-sm font-medium mt-1 hidden"></p>
      </div>
      
      <button id="checkStatusBtn" 
              class="w-full py-3 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-xl smooth-hover hover:from-indigo-700 hover:to-purple-700 hover:shadow-lg active:scale-95 transition-all duration-200">
        Check Status
      </button>
    </div>

    <div id="ticketDetails" class="hidden space-y-6 border-t border-gray-200 pt-6 section-transition slide-down">
      <h3 class="text-2xl font-bold text-gray-800">Ticket Details</h3>
      
      <div class="bg-gradient-to-br from-blue-50 to-indigo-50 p-5 rounded-2xl border-2 border-blue-100 space-y-3">
        <div class="flex justify-between items-center">
          <span class="font-semibold text-gray-700">Name:</span>
          <span id="pname" class="text-gray-900 font-medium"></span>
        </div>
        <div class="flex justify-between items-center">
          <span class="font-semibold text-gray-700">From:</span>
          <span id="from" class="text-gray-900 font-medium"></span>
        </div>
        <div class="flex justify-between items-center">
          <span class="font-semibold text-gray-700">To:</span>
          <span id="to" class="text-gray-900 font-medium"></span>
        </div>
        <div class="flex justify-between items-center">
          <span class="font-semibold text-gray-700">Status:</span>
          <span id="status" class="font-bold"></span>
        </div>
      </div>
      
      <button id="payBtn" 
              class="w-full py-3 px-4 bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold rounded-xl smooth-hover hover:from-green-600 hover:to-emerald-700 hover:shadow-lg active:scale-95 transition-all duration-200">
        Proceed to Pay
      </button>
    </div>

    <div id="paymentSection" class="hidden space-y-6 border-t border-gray-200 pt-6 section-transition slide-down">
      <h3 class="text-2xl font-bold text-gray-800">Payment Method</h3>
      
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">Select Method <span class="text-red-500">*</span></label>
        <select id="paymentMethod" 
                class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none appearance-none bg-white">
          <option value="">-- Select Method --</option>
          <option value="cash">Cash at Station</option>
          <option value="upi">UPI</option>
          <option value="card">Debit / Credit Card</option>
          <option value="bank">Bank Transfer</option>
        </select>
        <p class="text-sm text-red-500 mt-1 font-medium" id="methodErr"></p>
      </div>
      
      <div id="paymentFields" class="space-y-4"></div>
      
      <button id="makePayment" 
              class="w-full py-3 px-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-semibold rounded-xl smooth-hover hover:from-blue-600 hover:to-indigo-700 hover:shadow-lg active:scale-95 transition-all duration-200 hidden">
        Continue Payment
      </button>
    </div>

    <div id="otpSection" class="hidden space-y-6 border-t border-gray-200 pt-6 section-transition slide-down">
      <h3 class="text-2xl font-bold text-gray-800">OTP Verification</h3>
      
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">OTP <span class="text-red-500">*</span></label>
        <input type="text" id="otp" placeholder="Enter 6-digit OTP" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none text-center text-xl tracking-widest font-semibold">
        <p class="text-xs text-gray-500 text-center">OTP sent to your registered number/email</p>
        <p id="otpErr" class="text-sm text-red-500 mt-1 font-medium text-center"></p>
      </div>
      
      <button id="verifyOtp" 
              class="w-full py-3 px-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white font-semibold rounded-xl smooth-hover hover:from-indigo-700 hover:to-purple-700 hover:shadow-lg active:scale-95 transition-all duration-200">
        Verify OTP
      </button>
    </div>

    <div id="successMessage" class="hidden text-center space-y-6 section-transition fade-in">
      <div class="w-20 h-20 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center mx-auto shadow-lg">
        <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
        </svg>
      </div>
      <div class="space-y-2">
        <h3 class="text-3xl font-bold text-gray-800">Payment Successful!</h3>
        <p class="text-gray-600 text-lg">Your ticket has been confirmed</p>
      </div>
      <div class="pt-4">
        <button onclick="location.reload()" 
                class="px-6 py-2 bg-gradient-to-r from-gray-600 to-gray-700 text-white font-semibold rounded-xl smooth-hover hover:from-gray-700 hover:to-gray-800 hover:shadow-lg active:scale-95 transition-all duration-200">
          Check Another Ticket
        </button>
      </div>
    </div>

  </div>

<script>
$(document).ready(function(){
  var tickets = {
    "1234": { name: "Ravi Kumar", from: "Chennai", to: "Delhi", status: "WAITING LIST" },
    "9876": { name: "Priya Sharma", from: "Mumbai", to: "Bangalore", status: "CONFIRMED" },
    "1122": { name: "Amit Singh", from: "Delhi", to: "Kolkata", status: "CANCELLED" },
    "3344": { name: "Sneha Patel", from: "Ahmedabad", to: "Mumbai", status: "CONFIRMED" },
    "5566": { name: "Vikram Rao", from: "Bangalore", to: "Chennai", status: "WAITING LIST" },
    "7788": { name: "Anjali Verma", from: "Hyderabad", to: "Pune", status: "CONFIRMED" },
    "9900": { name: "Rohan Mehta", from: "Kolkata", to: "Delhi", status: "WAITING LIST" },
    "2233": { name: "Kavita Joshi", from: "Pune", to: "Bangalore", status: "CONFIRMED" },
    "4455": { name: "Manish Gupta", from: "Chennai", to: "Hyderabad", status: "CANCELLED" },
    "6677": { name: "Priyanka Nair", from: "Mumbai", to: "Ahmedabad", status: "CONFIRMED" },
    "8899": { name: "Suresh Reddy", from: "Delhi", to: "Chennai", status: "WAITING LIST" },
    "1010": { name: "Tanya Kapoor", from: "Bangalore", to: "Mumbai", status: "CONFIRMED" },
    "1212": { name: "Ajay Kumar", from: "Hyderabad", to: "Delhi", status: "WAITING LIST" },
    "1414": { name: "Neha Sharma", from: "Ahmedabad", to: "Pune", status: "CONFIRMED" },
    "1616": { name: "Rahul Jain", from: "Kolkata", to: "Bangalore", status: "CANCELLED" },
    "1818": { name: "Sonal Aggarwal", from: "Mumbai", to: "Chennai", status: "WAITING LIST" },
    "2020": { name: "Vikash Singh", from: "Pune", to: "Hyderabad", status: "CONFIRMED" },
    "2121": { name: "Isha Patel", from: "Delhi", to: "Ahmedabad", status: "CONFIRMED" },
    "2323": { name: "Nitin Sharma", from: "Bangalore", to: "Kolkata", status: "WAITING LIST" },
    "2424": { name: "Ritika Verma", from: "Chennai", to: "Mumbai", status: "CONFIRMED" }
  };

  function hideAllSections() {
    $("#pnrSection, #ticketDetails, #paymentSection, #otpSection, #successMessage").addClass("hidden");
  }

  function showSection(section) {
    hideAllSections();
    setTimeout(function() {
      section.removeClass("hidden").addClass("fade-in");
    }, 50);
  }

  $("#checkStatusBtn").click(function(){
    var pnr = $("#pnr").val().trim();
    $("#pnrErr").text("");
    $("#infoMessage").removeClass("hidden").addClass("text-blue-600").text("Checking ticket status...");
    
    if (pnr.length !== 4 || !/^\d+$/.test(pnr)){ 
        $("#pnrErr").text("PNR must be exactly 4 digits"); 
        $("#infoMessage").addClass("hidden"); 
        return; 
    }
    
    setTimeout(function(){
        if (tickets[pnr]){
            $("#pname").text(tickets[pnr].name); 
            $("#from").text(tickets[pnr].from); 
            $("#to").text(tickets[pnr].to); 
            
            var status = tickets[pnr].status;
            $("#status").text(status);
            
            if(status === "CONFIRMED") {
                $("#status").removeClass().addClass("text-green-600");
                $("#payBtn").prop("disabled", false).removeClass("bg-gray-400 cursor-not-allowed")
                    .addClass("bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700");
                $("#infoMessage").addClass("hidden");
            } else {
                $("#status").removeClass().addClass("text-red-600");
                $("#payBtn").prop("disabled", true).removeClass("bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700")
                    .addClass("bg-gray-400 cursor-not-allowed");
                $("#infoMessage").removeClass("text-blue-600").addClass("text-red-600").text("Payment not available for this ticket status");
            }
            
            showSection($("#ticketDetails"));
        } else { 
            $("#pnrErr").text("PNR not found"); 
            $("#infoMessage").addClass("hidden"); 
        }
    }, 800);
  });

  $("#payBtn").click(function(){
    var status = $("#status").text().trim();
    if(status === "CONFIRMED"){
        showSection($("#paymentSection"));
        $("#infoMessage").addClass("hidden");
    }
  });

  $("#paymentMethod").change(function(){
    var method = $(this).val();
    $("#methodErr").text("");
    $("#paymentFields").html("");
    $("#makePayment").addClass("hidden");
    
    var html = "";
    if(method === "cash") html = `
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">Station Code <span class="text-red-500">*</span></label>
        <input type="text" id="stationCode" placeholder="E.g., MAS or SBC" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none uppercase">
        <p class="text-xs text-gray-500">3-4 uppercase letters</p>
        <p class="text-sm text-red-500 mt-1 font-medium" id="stationErr"></p>
      </div>`;
      
    if(method === "upi") html = `
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">UPI ID <span class="text-red-500">*</span></label>
        <input type="text" id="upiId" placeholder="name@bank" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
        <p class="text-xs text-gray-500">Format: name@bank</p>
        <p class="text-sm text-red-500 mt-1 font-medium" id="upiErr"></p>
      </div>
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">Confirm UPI ID <span class="text-red-500">*</span></label>
        <input type="text" id="upiConfirm" placeholder="Re-enter your UPI ID" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
        <p class="text-xs text-gray-500">Must match the UPI ID above</p>
        <p class="text-sm text-red-500 mt-1 font-medium" id="upiConfirmErr"></p>
      </div>`;
      
    if(method === "card") html = `
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">Card Number <span class="text-red-500">*</span></label>
        <input type="text" id="cardNo" maxlength="16" placeholder="XXXX XXXX XXXX XXXX" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
        <p class="text-xs text-gray-500">16-digit card number</p>
        <p class="text-sm text-red-500 mt-1 font-medium" id="cardErr"></p>
      </div>
      <div class="grid grid-cols-2 gap-4">
        <div class="space-y-3">
          <label class="block text-sm font-semibold text-gray-700">Expiry (MM/YY) <span class="text-red-500">*</span></label>
          <input type="text" id="expiry" maxlength="5" placeholder="MM/YY" 
                 class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
          <p class="text-xs text-gray-500">MM/YY format</p>
          <p class="text-sm text-red-500 mt-1 font-medium" id="expErr"></p>
        </div>
        <div class="space-y-3">
          <label class="block text-sm font-semibold text-gray-700">CVV <span class="text-red-500">*</span></label>
          <input type="password" id="cvv" maxlength="3" placeholder="123" 
                 class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
          <p class="text-xs text-gray-500">3-digit CVV</p>
          <p class="text-sm text-red-500 mt-1 font-medium" id="cvvErr"></p>
        </div>
      </div>`;
      
    if(method === "bank") html = `
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">Account Number <span class="text-red-500">*</span></label>
        <input type="text" id="accNo" maxlength="12" placeholder="Your account number" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
        <p class="text-xs text-gray-500">9-12 digits account number</p>
        <p class="text-sm text-red-500 mt-1 font-medium" id="accErr"></p>
      </div>
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">Re-enter Account Number <span class="text-red-500">*</span></label>
        <input type="text" id="accConfirm" maxlength="12" placeholder="Re-enter account number" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none">
        <p class="text-xs text-gray-500">Must match above</p>
        <p class="text-sm text-red-500 mt-1 font-medium" id="accConfirmErr"></p>
      </div>
      <div class="space-y-3">
        <label class="block text-sm font-semibold text-gray-700">IFSC Code <span class="text-red-500">*</span></label>
        <input type="text" id="ifsc" maxlength="11" placeholder="E.g., SBIN0001234" 
               class="w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all duration-200 outline-none uppercase">
        <p class="text-xs text-gray-500">Bank branch IFSC</p>
        <p class="text-sm text-red-500 mt-1 font-medium" id="ifscErr"></p>
      </div>`;
      
    $("#paymentFields").html(html);
    setTimeout(function() {
      $("#makePayment").removeClass("hidden").addClass("slide-down");
    }, 100);
  });

  $("#makePayment").click(function(){
    var method = $("#paymentMethod").val();
    $("#methodErr").text("");
    
    if(method === ""){ 
      $("#methodErr").text("Please choose a payment method"); 
      return; 
    }
    
    if(method === "cash"){ 
      var code = $("#stationCode").val().trim(); 
      $("#stationErr").text(""); 
      if(!/^[A-Z]{3,4}$/.test(code)){ 
        $("#stationErr").text("Station code must be 3-4 uppercase letters"); 
        return; 
      } 
      finishPayment(); 
    }
    
    if(method === "upi"){ 
      var upi = $("#upiId").val().trim(); 
      var confirm = $("#upiConfirm").val().trim(); 
      $("#upiErr").text(""); 
      $("#upiConfirmErr").text(""); 
      if(!/^[a-zA-Z0-9.\-_]+@[a-zA-Z]{3,}$/.test(upi)){ 
        $("#upiErr").text("Invalid UPI format"); 
        return; 
      } 
      if(upi !== confirm){ 
        $("#upiConfirmErr").text("UPI IDs do not match"); 
        return; 
      } 
      finishPayment(); 
    }
    
    if(method === "card"){ 
      var num = $("#cardNo").val().trim(); 
      var exp = $("#expiry").val().trim(); 
      var cvv = $("#cvv").val().trim(); 
      $("#cardErr").text(""); 
      $("#expErr").text(""); 
      $("#cvvErr").text(""); 
      if(!/^\d{16}$/.test(num)){ 
        $("#cardErr").text("Card number must be 16 digits"); 
        return; 
      } 
      if(!/^(0[1-9]|1[0-2])\/\d{2}$/.test(exp)){ 
        $("#expErr").text("Expiry must be MM/YY"); 
        return; 
      } 
      if(!/^\d{3}$/.test(cvv)){ 
        $("#cvvErr").text("CVV must be 3 digits"); 
        return; 
      } 
      showSection($("#otpSection"));
    }
    
    if(method === "bank"){ 
      var acc = $("#accNo").val().trim(); 
      var acc2 = $("#accConfirm").val().trim(); 
      var ifsc = $("#ifsc").val().trim(); 
      $("#accErr").text(""); 
      $("#accConfirmErr").text(""); 
      $("#ifscErr").text(""); 
      if(!/^\d{9,12}$/.test(acc)){ 
        $("#accErr").text("Account number must be 9-12 digits"); 
        return; 
      } 
      if(acc !== acc2){ 
        $("#accConfirmErr").text("Account numbers do not match"); 
        return; 
      } 
      if(!/^[A-Z]{4}0[A-Z0-9]{6}$/.test(ifsc)){ 
        $("#ifscErr").text("Invalid IFSC code format"); 
        return; 
      } 
      finishPayment(); 
    }
  });

  $("#verifyOtp").click(function(){ 
    var otp = $("#otp").val().trim(); 
    $("#otpErr").text(""); 
    if(!/^\d{6}$/.test(otp)){ 
      $("#otpErr").text("OTP must be 6 digits"); 
      return; 
    } 
    finishPayment(); 
  });

  function finishPayment(){ 
    showSection($("#successMessage"));
  }
});
</script>

</body>
</html>
